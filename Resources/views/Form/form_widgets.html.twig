{%- block unite_cms_collection_widget -%}
    {% if prototype is defined %}
        {%- set attr = attr|merge({'data-prototype': form_row(prototype) }) -%}
    {% endif %}
    {% set initRows = [] %}
    {% for child in form %}
        {% set initRows = initRows|merge([form_row(child)]) %}
    {% endfor %}
    {%- set attr = attr|merge({'init-rows': initRows|json_encode }) -%}

    <{{ tag }} {{ block('widget_attributes') }}></{{ tag }}>

    {% if not alreadyRendered('UniteCMSCollectionFieldBundle') %}
        <link type="text/css" rel="stylesheet" href="{{ asset('main.css', 'UniteCMSCollectionFieldBundle') }}">
        <script type="text/javascript" src="{{ asset('main.js', 'UniteCMSCollectionFieldBundle') }}"></script>
    {% endif %}
{%- endblock unite_cms_collection_widget -%}
